{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
    <h4 class="mb-3">✏️ Change user: <strong>{{ user_obj.username }}</strong></h4>

    <form method="post">
        {% csrf_token %}

        <!-- Username (read-only) -->
        <div class="mb-3">
            <label class="form-label">Username</label>
            <input type="text"
                   class="form-control"
                   value="{{ user_obj.username }}"
                   disabled>
        </div>

        <!-- Staff -->
        <div class="form-check mb-3">
            <input type="checkbox"
                   name="is_staff"
                   class="form-check-input"
                   {% if user_obj.is_staff %}checked{% endif %}>
            <label class="form-check-label">
                Staff status (can access admin dashboard)
            </label>
        </div>

        <!-- Groups -->
        <label class="fw-bold mb-2">Groups</label>
        <div class="border rounded p-3 mb-3">
            {% for g in groups %}
                <div class="form-check">
                    <input type="checkbox"
                           name="groups"
                           value="{{ g.id }}"
                           class="form-check-input"
                           {% if g in user_obj.groups.all %}checked{% endif %}>
                    <label class="form-check-label">
                        {{ g.name }}
                    </label>
                </div>
            {% endfor %}
        </div>

        <div class="d-flex justify-content-between">
            <a href="{% url 'user_list' %}" class="btn btn-secondary">
                ← Back
            </a>

            <div>
                <a href="{% url 'user_delete' user_obj.id %}"
                   class="btn btn-danger me-2">
                    Delete
                </a>
                <button class="btn btn-primary">
                    Save changes
                </button>
            </div>
        </div>

    </form>
</div>

{% endblock %}
