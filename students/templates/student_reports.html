{% extends "base.html" %}
{% block content %}

<h3 class="school-title">NAME SCHOOL</h3>
<p class="school-sub">Academic Report</p>

{% for class_name, reports in classes.items %}

<h4 class="class-title">{{ class_name }}</h4>

<div class="table-responsive">
<table class="broadsheet">
    <thead>
        <tr>
            <th>#</th>
            <th>Adm No</th>
            <th>Name</th>

            {% for subject in reports.0.subjects.all %}
            <th>{{ subject.subject.name }}</th>
            {% endfor %}

            <th>Total</th>
            <th>MN MKS</th>

            <th>Grade</th>
            <th>POS</th>

            <th>PDF</th>
        </tr>
    </thead>

    <tbody>
        {% for report in reports %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ report.student.admission_number }}</td>
            <td class="name">{{ report.student.full_name }}</td>

            {% for subject in report.subjects.all %}
                <td>{{ subject.marks }}</td>
            {% endfor %}

            <td class="total">{{ report.total_score }}</td>
            <td>{{ report.mean_marks|floatformat:2 }}</td>
            <td class="grade">{{ report.grade }}</td>
            <td>{{ report.position }}</td>


            <td>
                <a href="{% url 'download_report_pdf' report.id %}" class="pdf-btn">
                    â¬‡ PDF
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>

{% endfor %}

<style>
.school-title {
    text-align: center;
    font-weight: 700;
    letter-spacing: 1px;
}

.school-sub {
    text-align: center;
    font-size: 0.85rem;
    margin-bottom: 1rem;
    color: #555;
}

.class-title {
    margin-top: 2rem;
    font-weight: 600;
    border-left: 5px solid #111;
    padding-left: 10px;
}

/* ===== BROADSHEET TABLE ===== */
.broadsheet {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.75rem;
}

.broadsheet th,
.broadsheet td {
    border: 1px solid #000;
    padding: 4px;
    text-align: center;
}

.broadsheet thead th {
    background: #f2f2f2;
    font-weight: 700;
}

.broadsheet td.name {
    text-align: left;
    font-weight: 500;
}

.broadsheet td.total {
    font-weight: 700;
}

.broadsheet td.grade {
    font-weight: 700;
    color: #0f172a;
}

/* PDF button */
.pdf-btn {
    font-size: 0.65rem;
    padding: 3px 6px;
    border: 1px solid #000;
    text-decoration: none;
    color: #000;
}

.pdf-btn:hover {
    background: #000;
    color: #fff;
}

/* PRINT LOOK */
@media print {
    body {
        font-size: 10px;
    }

    .pdf-btn {
        display: none;
    }
}
 {% endblock %}